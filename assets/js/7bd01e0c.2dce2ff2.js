"use strict";(self.webpackChunkatmo_trial_doc=self.webpackChunkatmo_trial_doc||[]).push([[1745],{3905:function(e,n,t){t.d(n,{Zo:function(){return c},kt:function(){return m}});var a=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=a.createContext({}),u=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},c=function(e){var n=u(e.components);return a.createElement(s.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},d=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=u(t),m=r,h=d["".concat(s,".").concat(m)]||d[m]||p[m]||o;return t?a.createElement(h,i(i({ref:n},c),{},{components:t})):a.createElement(h,i({ref:n},c))}));function m(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=t.length,i=new Array(o);i[0]=d;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var u=2;u<o;u++)i[u]=t[u];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}d.displayName="MDXCreateElement"},5246:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return u},toc:function(){return c},default:function(){return d}});var a=t(7462),r=t(3366),o=(t(7294),t(3905)),i=["components"],l={},s="Creating handlers",u={unversionedId:"atmo/usage/creating-handlers",id:"atmo/usage/creating-handlers",isDocsHomePage:!1,title:"Creating handlers",description:'{% hint style="info" %}',source:"@site/docs/atmo/usage/creating-handlers.md",sourceDirName:"atmo/usage",slug:"/atmo/usage/creating-handlers",permalink:"/docs/atmo/usage/creating-handlers",editUrl:"https://github.com/suborbital/docs/edit/master/atmo-trial-docs/docs/atmo/usage/creating-handlers.md",tags:[],version:"current",lastUpdatedAt:1638861026,formattedLastUpdatedAt:"12/7/2021",frontMatter:{},sidebar:"docs",previous:{title:"Creating Runnables",permalink:"/docs/atmo/usage/creating-runnables"},next:{title:"Building a Bundle",permalink:"/docs/atmo/usage/building-a-bundle"}},c=[],p={toc:c};function d(e){var n=e.components,t=(0,r.Z)(e,i);return(0,o.kt)("wrapper",(0,a.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"creating-handlers"},"Creating handlers"),(0,o.kt)("p",null,'{% hint style="info" %}\nIf you haven\'t created a project yet, see ',(0,o.kt)("a",{parentName:"p",href:"../getstarted/"},"Get started")," first.\n{% endhint %}"),(0,o.kt)("p",null,"Your project contains a ",(0,o.kt)("inlineCode",{parentName:"p"},"Directive.yaml")," file that controls your entire application. The Directive is included in the Runnable Bundle used by Atmo to run your application."),(0,o.kt)("p",null,"The Directive has some metadata such as a unique application identifier and a version number, as well as some handlers."),(0,o.kt)("p",null,"Each handler tells Atmo how to handle a ",(0,o.kt)("strong",{parentName:"p"},"resource.")," A resource is an input that Atmo makes available via HTTP endpoints, event handlers, and more. To start, Atmo supports handlers for HTTP requests, particulary designed to help building web APIs. Here is an example Directive:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"identifier: com.suborbital.test\nappVersion: v0.0.1\natmoVersion: v0.4.2\n\nhandlers:\n  - type: request\n    resource: /hello\n    method: POST\n    steps:\n      - group:\n        - fn: modify-url\n        - fn: helloworld-rs\n          as: hello\n      - fn: fetch-test\n        with:\n          url: modify-url\n          logme: hello\n")),(0,o.kt)("p",null,"This describes the application being constructed. It declares a resource ","(",(0,o.kt)("inlineCode",{parentName:"p"},"HTTP POST /hello"),")"," and a set of ",(0,o.kt)("inlineCode",{parentName:"p"},"steps")," to handle that request. The ",(0,o.kt)("inlineCode",{parentName:"p"},"steps")," are a set of Runnable functions to be ",(0,o.kt)("strong",{parentName:"p"},"composed")," when handling requests to the ",(0,o.kt)("inlineCode",{parentName:"p"},"/hello")," endpoint."),(0,o.kt)("p",null,"There are two types of ",(0,o.kt)("inlineCode",{parentName:"p"},"step"),". The first step you see above is a ",(0,o.kt)("inlineCode",{parentName:"p"},"group"),", meaning that all of the functions in that group will be executed ",(0,o.kt)("strong",{parentName:"p"},"concurrently"),"."),(0,o.kt)("p",null,"The second step shown above is a single ",(0,o.kt)("inlineCode",{parentName:"p"},"fn")," , which calls a Runnable that uses the ",(0,o.kt)("a",{parentName:"p",href:"/docs/atmo/runnable-api/introduction"},"Runnable API")," to make an HTTP request. The API is continually evolving to include more capabilities. In addition to making HTTP requests, it includes logging, database connections, caching, and more."),(0,o.kt)("p",null,"The output of the final function in a handler is used as the response data for the request, by default. If you wish to use the output from a different function, you can include the ",(0,o.kt)("inlineCode",{parentName:"p"},"response")," option in your handler, listing the name of the function to use as a response. If the final step is a group, then the ",(0,o.kt)("inlineCode",{parentName:"p"},"response")," clause must be included."),(0,o.kt)("p",null,"For example: "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"steps:\n  - group:\n    - fn: modify-url\n    - fn: helloworld-rs\n      as: hello\n  - fn: fetch-test\n    with:\n      url: modify-url\n      logme: hello\nresponse: hello\n")),(0,o.kt)("p",null,"Your application can contain as many handlers as needed, and functions can be re-used among many handlers. Each Runnable in your project can be called by its name. The ",(0,o.kt)("inlineCode",{parentName:"p"},"subo")," tool will validate your directive to ensure it is not calling any Runnables that don't exist in your project."),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"as")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"with")," clauses shown above will be discussed ",(0,o.kt)("a",{parentName:"p",href:"/docs/atmo/usage/managing-state"},"next"),"."))}d.isMDXComponent=!0}}]);